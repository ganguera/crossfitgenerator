<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crossfit Movement Generator</title>
    <script>
        // Pre-generated funny Crossfit movements
        const movements = [
            "Burpee Twister Explosion",
            "Kettlebell Chaos Swing",
            "Snatch and Pray",
            "Lunge of Doom",
            "Squatpocalypse",
            "Push-Up Thunderstorm",
            "Deadlift Avalanche",
            "Pistol Squat Inferno",
            "Box Jump Bonanza",
            "Wall Ball Mayhem",
            "Overhead Mayhem Slam",
            "Barbell Lightning Lift",
            "Jumping Jack Tsunami",
            "Dumbbell Disaster Dash",
            "Thruster Tornado",
            "Plank of Fury",
            "Sledgehammer Cyclone",
            "Mountain Climber Chaos",
            "Rope Whip Whirlwind",
            "Bear Crawl Carnage",
            "Picture-perfect Finish Posers"
        ];

        function generateMovement() {
            const randomIndex = Math.floor(Math.random() * movements.length);
            const movementName = movements[randomIndex];

            // Replace spaces with hyphens for the query parameter value
            const formattedName = movementName.toLowerCase().replace(/\s+/g, "-");
            const newUrl = `${window.location.origin}?m=${formattedName}`;
            window.history.pushState({}, "", newUrl);

            // Update movement display
            const movementDisplay = document.getElementById("movement-display");
            const movementImage = document.getElementById("movement-image");

            movementDisplay.textContent = movementName;
            movementImage.src = `images/${formattedName}.webp`;
        }

        function getMovementFromQuery() {
            const urlParams = new URLSearchParams(window.location.search);
            const movementQuery = urlParams.get("m");
            if (!movementQuery) return null;

            // Replace hyphens with spaces and capitalize each word
            const formattedQuery = movementQuery
                .split("-")
                .map(word => word.charAt(0).toUpperCase() + word.slice(1))
                .join(" ");
            return movements.includes(formattedQuery) ? formattedQuery : null;
        }

        window.onload = () => {
            const initialMovement = getMovementFromQuery();
            const movementDisplay = document.getElementById("movement-display");
            const movementImage = document.getElementById("movement-image");

            if (initialMovement) {
                movementDisplay.textContent = initialMovement;
                const formattedName = initialMovement.toLowerCase().replace(/\s+/g, "-");
                movementImage.src = `images/${formattedName}.webp`;
            } else {
                generateMovement();
            }
        };

        function shareMovement() {
            const currentUrl = window.location.href;
            navigator.clipboard.writeText(currentUrl).then(() => {
                alert("Movement URL copied to clipboard!");
            }).catch(err => {
                alert("Failed to copy URL: " + err);
            });
        }
    </script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
        }

        h1 {
            margin: 20px 0;
        }

        #movement-display {
            font-size: 1.5em;
            margin: 20px 0;
            font-weight: bold;
        }

        #movement-image {
            width: 300px;
            height: auto;
            margin: 20px 0;
        }

        button {
            padding: 10px 20px;
            font-size: 1em;
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        button:hover {
            background-color: #0056b3;
        }

        #share-button {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>Crossfit Movement Generator</h1>
    <div id="movement-display">Loading...</div>
    <img id="movement-image" src="" alt="Movement" />
    <br />
    <button onclick="generateMovement()">Generate Movement</button>
    <button id="share-button" onclick="shareMovement()">Share Movement</button>
</body>
</html>
